(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{9653:function(e,s,a){Promise.resolve().then(a.bind(a,3559))},6648:function(e,s,a){"use strict";a.d(s,{default:function(){return i.a}});var t=a(5601),i=a.n(t)},5601:function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var a in s)Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}(s,{default:function(){return o},getImageProps:function(){return r}});let t=a(9920),i=a(497),l=a(8173),n=t._(a(1241));function r(e){let{props:s}=(0,i.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,a]of Object.entries(s))void 0===a&&delete s[e];return{props:s}}let o=l.Image},3559:function(e,s,a){"use strict";a.d(s,{default:function(){return L}});var t=a(7437),i=a(2265),l=a(9506),n=a(9842),r=a(9733),o=a(8185),c=a(4662),d=a(5936),m=a(9973),u=a(6763),h=a(3274),x=a(883);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,a(8030).Z)("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);var g=a(4817),f=a(8960),v=a(6670);function j(e){return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("path",{d:"M20 6 9 17l-5-5"})})}function b(e){return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M5 12h14"}),(0,t.jsx)("path",{d:"M12 5v14"})]})}var N=a(7209),w=a(402),y=a(9354);let k=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("textarea",{className:(0,y.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});k.displayName="Textarea";var C=a(9055),S=a(9782),z=a(349),A=a(1572);A.ZP.init({publicKey:"Yj5CBlcpbHrHQeYik"});let I=(e,s)=>A.ZP.send("service_epdy9eq",e,s);function L(e){let{userId:s}=e,{toast:a}=(0,u.pm)(),[y,A]=(0,i.useState)([]),[L,E]=(0,i.useState)([]),[M,_]=(0,i.useState)(!0),[D,F]=(0,i.useState)(null),[O,Z]=(0,i.useState)(null),[P,q]=(0,i.useState)(""),[T,V]=(0,i.useState)(!1),[B,H]=(0,i.useState)(""),[J,K]=(0,i.useState)(!1),[U,Q]=(0,i.useState)(null),[R,W]=(0,i.useState)(""),[Y,G]=(0,i.useState)(""),[$,X]=(0,i.useState)(!1),ee=(0,i.useCallback)(async(e,s,a)=>{if(O&&O.email)try{let t={to_email:O.email,to_name:O.displayName||"Dono(a) da lista",from_name:a,subject:e,message:s};await I("template_ynk7ot9",t),console.log("E-mail de notifica\xe7\xe3o enviado com sucesso!")}catch(e){console.error("Falha ao enviar e-mail:",e)}else console.error("Dono da lista n\xe3o tem e-mail, n\xe3o \xe9 poss\xedvel notificar.")},[O]);(0,i.useEffect)(()=>{let e,a;if(!s){console.error("ID de usu\xe1rio inv\xe1lido."),F("ID de usu\xe1rio inv\xe1lido."),_(!1);return}return console.log("userId em uso:",s),(async()=>{try{_(!0);let t=(0,n.JU)(l.db,"users",s),i=(0,n.IO)((0,n.hJ)(l.db,"materials"),(0,n.ar)("userId","==",s)),r=(0,n.JU)(l.db,"shoppingLists",s),o=await (0,n.QT)(t);if(o.exists()){let e=o.data();Z({displayName:e.displayName||"Dono(a) da Lista",email:e.email||""})}else F("N\xe3o foi poss\xedvel encontrar o propriet\xe1rio da lista."),Z(null);let c=await (0,n.PL)(i),d=[];c.forEach(e=>{d.push({id:e.id,...e.data()})}),d.sort((e,s)=>e.name.localeCompare(s.name)),E(d);let m=await (0,n.QT)(r);if(m.exists()){let e=m.data().items||[];e.sort((e,s)=>{var a,t;return((null===(a=s.createdAt)||void 0===a?void 0:a.toMillis())||0)-((null===(t=e.createdAt)||void 0===t?void 0:t.toMillis())||0)}),A(e)}else await (0,n.pl)(r,{userId:s,items:[]});_(!1),e=(0,n.cf)(i,e=>{let s=[];e.forEach(e=>{s.push({id:e.id,...e.data()})}),s.sort((e,s)=>e.name.localeCompare(s.name)),E(s)},e=>{console.error("Error listening to materials: ",e),F("Falha ao carregar os materiais.")}),a=(0,n.cf)(r,e=>{if(e.exists()){let s=e.data().items||[];s.sort((e,s)=>{var a,t;return((null===(a=s.createdAt)||void 0===a?void 0:a.toMillis())||0)-((null===(t=e.createdAt)||void 0===t?void 0:t.toMillis())||0)}),A(s)}},e=>{console.error("Error listening to shopping list: ",e),F("Falha ao carregar a lista de compras.")})}catch(e){console.error("Error setting up listeners: ",e),F("Falha ao carregar a p\xe1gina. Verifique o link e tente novamente."),_(!1)}})(),()=>{null==e||e(),null==a||a()}},[s]);let es=(0,i.useCallback)(async e=>{if(!s)return;let a=(0,n.JU)(l.db,"shoppingLists",s);await (0,n.pl)(a,{items:e,userId:s},{merge:!0})},[s]),ea=(0,i.useCallback)(async e=>{let s=[...y];if(s.findIndex(s=>s.id===e.id)>-1)a({title:"Item j\xe1 est\xe1 na lista!",description:"".concat(e.name," j\xe1 foi adicionado \xe0 lista de compras.")});else{let t={id:e.id,name:e.name,createdAt:n.EK.now()};s.push(t),await es(s),await ee("Novo Item Adicionado","O item <strong>".concat(t.name,"</strong> foi adicionado \xe0 sua lista de compras."),"Lista de Limpeza F\xe1cil App"),a({title:"Item Adicionado!",description:"".concat(e.name," foi adicionado \xe0 lista de compras.")})}},[y,es,a,ee]),et=(0,i.useCallback)(async()=>{if(!P.trim()){a({variant:"destructive",title:"Nome inv\xe1lido",description:"Por favor, digite o nome do item."});return}let e={id:"custom-".concat(Date.now()),name:P.trim(),createdAt:n.EK.now()},s=[...y,e];await es(s),await ee("Novo Item Avulso Adicionado",'O item avulso "<strong>'.concat(e.name,'</strong>" foi adicionado \xe0 sua lista de compras.'),"Lista de Limpeza F\xe1cil App"),a({title:"Item Adicionado!",description:"".concat(e.name," foi adicionado \xe0 lista.")}),q("")},[P,y,es,a,ee]),ei=(0,i.useCallback)(async e=>{let s=y.filter(s=>s.id!==e);await es(s)},[y,es]),el=(0,i.useCallback)(async()=>{if(!U||!Y.trim()||"doubt"===U&&!R.trim()){a({variant:"destructive",title:"Campos obrigat\xf3rios",description:"Por favor, preencha todos os campos necess\xe1rios."});return}X(!0);try{let e;await (0,n.ET)((0,n.hJ)(l.db,"feedback"),{listOwnerId:s,type:U,text:Y,name:"doubt"===U?R:"An\xf4nimo",createdAt:(0,n.Bt)(),status:"new"});let t="suggestion"===U?"Nova Sugest\xe3o Recebida":"Nova D\xfavida Recebida";e="suggestion"===U?"Voc\xea recebeu uma nova sugest\xe3o.<br><br><strong>Mensagem:</strong><br>".concat(Y):"Voc\xea recebeu uma nova mensagem de <strong>".concat(R,"</strong>.<br><br><strong>Mensagem:</strong><br>").concat(Y),await ee(t,e,"Lista de Limpeza F\xe1cil App"),a({title:"Mensagem Enviada!",description:"Obrigado pelo seu feedback."}),K(!1),Q(null),W(""),G("")}catch(e){console.error("Error sending feedback: ",e),a({variant:"destructive",title:"Erro ao enviar",description:"N\xe3o foi poss\xedvel enviar sua mensagem. Tente novamente."})}finally{X(!1)}},[s,U,Y,R,a,ee]),en=(0,i.useMemo)(()=>new Set(y.map(e=>e.id)),[y]),er=(0,i.useMemo)(()=>L.filter(e=>!en.has(e.id)).filter(e=>e.name.toLowerCase().includes(B.toLowerCase())),[L,B,en]);if(M)return(0,t.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:(0,t.jsx)(h.Z,{className:"h-12 w-12 animate-spin text-primary"})});let eo=e=>e?(0,S.WU)(e.toDate(),"dd/MM/yyyy '\xe0s' HH:mm",{locale:z.F}):null,ec=()=>(0,t.jsx)(t.Fragment,{children:y.length>0?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("ul",{className:"space-y-3",children:y.map(e=>(0,t.jsxs)("li",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),e.createdAt&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:eo(e.createdAt)})]}),(0,t.jsx)(r.z,{variant:"ghost",size:"icon",onClick:()=>ei(e.id),children:(0,t.jsx)(x.Z,{className:"h-4 w-4 text-destructive"})})]},e.id))}),(0,t.jsx)(m.Z,{})]}):(0,t.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,t.jsx)("p",{children:"A lista de compras est\xe1 vazia."}),(0,t.jsx)("p",{className:"text-sm",children:"Clique nos itens dispon\xedveis para adicionar."})]})});return(0,t.jsxs)("div",{className:"flex min-h-screen w-full flex-col",children:[(0,t.jsxs)("header",{className:"sticky top-0 z-30 flex flex-col gap-4 border-b bg-background/95 p-4 md:px-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between self-start gap-2 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-8 w-8",children:(0,t.jsx)(v.T,{})}),(0,t.jsx)("span",{className:"font-headline text-xl font-semibold",children:"Lista de Limpeza F\xe1cil"})]}),(0,t.jsx)("div",{className:"md:hidden"})]}),(0,t.jsxs)(c.Vq,{open:J,onOpenChange:e=>{K(e),e||(Q(null),W(""),G(""))},children:[(0,t.jsx)(c.hg,{asChild:!0,children:(0,t.jsxs)(r.z,{className:"w-full",children:[(0,t.jsx)(p,{className:"mr-2 h-4 w-4"}),"Sugest\xf5es ou D\xfavidas"]})}),(0,t.jsxs)(c.cZ,{children:[(0,t.jsxs)(c.fK,{children:[(0,t.jsx)(c.$N,{children:"Deixe sua mensagem"}),(0,t.jsx)(c.Be,{children:"Sua opini\xe3o \xe9 importante! Selecione o tipo de mensagem que deseja enviar."})]}),U?(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsx)("h3",{className:"font-medium text-lg text-center",children:"suggestion"===U?"Enviar Sugest\xe3o":"Tirar D\xfavida"}),"doubt"===U&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(w._,{htmlFor:"name",children:"Seu Nome"}),(0,t.jsx)(N.I,{id:"name",placeholder:"Digite seu nome",value:R,onChange:e=>W(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(w._,{htmlFor:"message",children:"suggestion"===U?"Sugest\xe3o":"D\xfavida"}),(0,t.jsx)(k,{id:"message",placeholder:"Digite sua ".concat("suggestion"===U?"sugest\xe3o":"d\xfavida"," aqui..."),value:Y,onChange:e=>G(e.target.value)})]})]}):(0,t.jsxs)("div",{className:"flex justify-center gap-4 py-8",children:[(0,t.jsx)(r.z,{onClick:()=>Q("suggestion"),size:"lg",children:"Sugest\xe3o"}),(0,t.jsx)(r.z,{onClick:()=>Q("doubt"),size:"lg",variant:"secondary",children:"D\xfavida"})]}),(0,t.jsx)(c.cN,{children:U&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.z,{variant:"ghost",onClick:()=>Q(null),children:"Voltar"}),(0,t.jsxs)(r.z,{onClick:el,disabled:$,children:[$&&(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviar"]})]})})]})]})]}),(0,t.jsx)("main",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 pb-24",children:D?(0,t.jsx)("div",{className:"text-center text-destructive py-16",children:D}):(0,t.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6 gap-2",children:(0,t.jsx)("h1",{className:"font-headline text-3xl font-bold tracking-tight",children:"Itens Dispon\xedveis"})}),(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)(g.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(N.I,{type:"text",placeholder:"Pesquisar item...",value:B,onChange:e=>H(e.target.value),className:"w-full pl-10"})]}),(0,t.jsxs)("div",{className:"w-full space-y-2 mb-6",children:[(0,t.jsx)(w._,{children:"Adicionar um item que n\xe3o est\xe1 na lista"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.I,{type:"text",placeholder:"Ex: Bom Ar",value:P,onChange:e=>q(e.target.value),onKeyDown:e=>"Enter"===e.key&&et()}),(0,t.jsx)(r.z,{type:"submit",onClick:et,children:"Adicionar"})]})]}),(0,t.jsx)(m.Z,{className:"mb-6"}),(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4",children:er.map(e=>{let s=en.has(e.id);return(0,t.jsx)(o.Zb,{className:"flex flex-col overflow-hidden transition-shadow hover:shadow-lg group cursor-pointer",onClick:()=>ea(e),children:(0,t.jsxs)(o.Ol,{className:"flex-row items-center justify-between p-4",children:[(0,t.jsx)(o.ll,{className:"font-headline text-base",children:e.name}),(0,t.jsx)("div",{className:"flex justify-end gap-1",children:s?(0,t.jsx)(j,{className:"h-5 w-5 text-primary"}):(0,t.jsx)(b,{className:"h-5 w-5 text-muted-foreground"})})]})},e.id)})})]}),(0,t.jsx)("div",{className:"hidden lg:block lg:col-span-1",children:(0,t.jsxs)(o.Zb,{className:"sticky top-24",children:[(0,t.jsx)(o.Ol,{children:(0,t.jsx)(o.ll,{className:"font-headline text-2xl",children:"Lista de Compras"})}),(0,t.jsx)(o.aY,{children:ec()})]})})]})}),(0,t.jsx)("div",{className:"lg:hidden",children:(0,t.jsxs)(d.yo,{open:T,onOpenChange:V,children:[(0,t.jsx)(d.aM,{asChild:!0,children:(0,t.jsxs)(r.z,{className:"fixed bottom-6 right-6 z-40 h-16 w-16 rounded-full shadow-lg",children:[(0,t.jsx)(f.Z,{className:"h-6 w-6"}),y.length>0&&(0,t.jsx)(C.C,{variant:"destructive",className:"absolute -top-2 -right-2 h-6 w-6 justify-center rounded-full",children:y.length}),(0,t.jsx)("span",{className:"sr-only",children:"Abrir lista de compras"})]})}),(0,t.jsxs)(d.ue,{side:"bottom",className:"h-[90%] flex flex-col p-0",children:[(0,t.jsx)(d.Tu,{className:"p-6 pb-0",children:(0,t.jsx)(d.bC,{className:"font-headline text-2xl",children:"Lista de Compras"})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto py-4 px-4",children:ec()}),(0,t.jsx)(d.FF,{className:"p-6 pt-0",children:(0,t.jsx)(r.z,{onClick:()=>V(!1),className:"w-full",children:"Fechar"})})]})]})})]})}}},function(e){e.O(0,[358,990,247,537,173,986,159,428,971,23,744],function(){return e(e.s=9653)}),_N_E=e.O()}]);